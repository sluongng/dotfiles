# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                     User Overrides                          ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
#
# Layering model:
# 1) Upstream Hyprland reference:
#    /usr/share/hypr/hyprland.conf (package: hyprland)
# 2) CachyOS default baseline:
#    /etc/skel/.config/hypr (package: cachyos-hyprland-settings)
# 3) Local overrides:
#    this file (~/.config/hypr/config/user-overrides.conf)
#
# Keep local changes in this file only so package defaults can be refreshed
# without re-merging edits across many files.
#
# Current local overrides in this file:
# - App defaults: dolphin, walker, ghostty, hypridle
# - Environment: XDG_MENU_PREFIX, XMODIFIERS
# - Input: keyboard repeat rate/delay
# - Animations: windowsMove/workspacesIn/workspacesOut disabled
# - Rendering/stability: vrr=0, direct_scanout=0, send_content_type=false
# - Ecosystem: update/donation notifications disabled
# - Workspace rules: zero gaps on selected workspaces
# - Keybind overrides: IME toggle, fullscreen behavior, lock key, waybar toggle
#
# Maintenance workflow:
# 1) Refresh package defaults.
# 2) Keep baseline files close to package defaults.
# 3) Re-apply local behavior only in this file.

# ======= Application Defaults =======
source = ~/.config/hypr/config/user-app-defaults.conf

# ======= Environment =======
envd = XDG_MENU_PREFIX,arch-
envd = XMODIFIERS,@im=fcitx

# ======= Input =======
input {
    repeat_rate = 40
    repeat_delay = 200
}

# ======= Animations =======
animations {
    animation = windowsMove, 0
    animation = workspacesIn, 0
    animation = workspacesOut, 0
}

# ======= Rendering / Stability =======
misc {
    vrr = 0
}

ecosystem {
    no_update_news = true
    no_donation_nag = true
}

render {
    direct_scanout = 0
    send_content_type = false
}

opengl {
    nvidia_anti_flicker = true
}

# ======= Workspace Rules =======
workspace = w[tv1-10], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0

# ======= Keybind Overrides =======
# Remove upstream defaults we intentionally replace.
unbind = $mainMod SHIFT, M
unbind = $mainMod, F
unbind = $mainMod, L

bindd = ALT, SPACE, Toggles Vietnamese IME, exec, fcitx5-remote -t
bindd = $mainMod, F, Toggles compositor fullscreen (Chromium-safe), fullscreenstate, 2 0
bindd = $mainMod SHIFT, F, Toggles native app fullscreen mode, fullscreen, 0
bindd = $mainMod SHIFT, L, Lock the screen, exec, hyprlock
bindd = $mainMod, B, Toggle Waybar visibility, exec, killall -SIGUSR1 waybar
bindd = $mainMod SHIFT, S, Creates a screenshot of an area, exec, $shot-region
